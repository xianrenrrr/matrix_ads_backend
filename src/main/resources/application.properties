spring.application.name=demo

# Server Configuration
server.port=${PORT:8080}
server.shutdown=graceful

# File Upload Configuration
spring.servlet.multipart.max-file-size=200MB
spring.servlet.multipart.max-request-size=200MB

# Firebase Configuration
firebase.enabled=true
firebase.storage.bucket=${FIREBASE_STORAGE_BUCKET:matrix_ads_video}
firebase.service-account-key=${FIREBASE_SERVICE_ACCOUNT_KEY:/Users/liqiyang/Desktop/project/matrix_ads/matrix_ads_backend/serviceAccountKey.json}

# AI Configuration
openai.api.key=${OPENAI_API_KEY:}
ai.template.useObjectOverlay=true
ai.template.includeLabelDetection=true

# Segmentation Provider Configuration
ai.seg.provider=${AI_SEG_PROVIDER:paddledet}
ai.overlay.minConf=0.60
ai.overlay.minArea=0.08
ai.overlay.maxObjects=4

# PaddleDet Service Configuration
paddle.seg.url=${PADDLE_SEG_URL:https://paddledet-service.onrender.com/detect}
paddle.seg.token=${PADDLE_SEG_TOKEN:}

# Qwen API Configuration
qwen.api.base=${QWEN_API_BASE:https://dashscope.aliyuncs.com/compatible-mode/v1}
qwen.api.key=${QWEN_API_KEY:}
qwen.model=qwen-vl-plus
qwen.suggest.model=qwen-2.5-instruct
qwen.timeout.ms=15000

# AI Providers Configuration
ai.providers.qwen.enabled=true
ai.providers.qwen.api-key=${AI_QWEN_API_KEY:}
ai.providers.qwen.model=qwen-vl-plus
ai.providers.qwen.endpoint=https://dashscope.aliyuncs.com/compatible-mode/v1

ai.providers.yolo.enabled=true
ai.providers.yolo.api-key=${AI_YOLO_API_KEY:}
ai.providers.yolo.endpoint=https://api-inference.huggingface.co/models/facebook/detr-resnet-50

# Prefer larger objects only for YOLO fallback polygon detection
ai.providers.yolo.min-area=0.08

# AI Object Overlay Configuration
ai.overlay.confidenceThreshold=0.6
ai.overlay.maxObjects=4
ai.overlay.minArea=0.08
ai.overlay.nmsIouThreshold=0.5
ai.overlay.smoothingDelta=0.15

# AI Label Localization Configuration
ai.labels.localization.enabled=true

# AI Polygon Overlay Configuration
ai.overlay.polygons.enabled=true
ai.overlay.polygons.maxShapes=4
ai.overlay.polygons.minArea=0.08

# FFmpeg Scene Detection Configuration
ai.scenes.threshold=0.7
ffmpeg.path=ffmpeg

# Health Check Configuration for Render
management.endpoints.web.exposure.include=health,info
management.endpoint.health.probes.enabled=true
management.endpoint.health.show-details=always
management.health.livenessstate.enabled=true
management.health.readinessstate.enabled=true
management.server.port=${server.port}

# Reduce startup time
spring.main.lazy-initialization=false

# Development Tools (disabled in production)
spring.devtools.restart.enabled=${DEVELOPMENT_MODE:false}
spring.devtools.livereload.enabled=${DEVELOPMENT_MODE:false}

# Performance Optimizations for Production
spring.jpa.open-in-view=false
logging.level.root=INFO
logging.level.com.example.demo=INFO

# Disable unnecessary auto-configurations in production
spring.autoconfigure.exclude=${DISABLE_AUTOCONFIGURE:}

ffprobe.path=ffprobe

# Region labeling (full-frame context) configuration
ai.labeling.regions.enabled=true
ai.labeling.regions.minConf=0.8
ai.labeling.perCrop.enabled=false
